以下是一个使用bash编写的脚本，用于测试本机与11.11.11.0/24网段的连通性，并在连续15分钟无法访问时重启本机。
``` shell
#!/bin/bash

RESTART_COUNT=0
MAX_RESTART_COUNT=15

while true; do
    if ping -c 1 11.11.11.1 >/dev/null; then
        echo "Connected to 11.11.11.0/24"
        RESTART_COUNT=0
    else
        echo "Unable to connect to 11.11.11.0/24"
        ((RESTART_COUNT++))
    fi

    if [ $RESTART_COUNT -eq $MAX_RESTART_COUNT ]; then
        echo "Restarting the system..."
        reboot
    fi

    sleep 60
done
```

要使该脚本在系统重启后自动执行，可以将脚本放置在/etc/init.d/目录下，并设置执行权限。
sudo cp script.sh /etc/init.d/
sudo chmod +x /etc/init.d/script.sh

然后，可以使用update-rc.d命令将脚本添加到系统启动项中。
sudo update-rc.d script.sh defaults

现在，每次系统重启后，脚本就会自动执行。
请注意，为了能够在脚本中执行重启操作，需要以root权限运行脚本。可以使用sudo命令来运行脚本，或者将脚本添加到root用户的启动项中。
